{% extends 'politicians/base_template.html' %}
{% block pagetitle %}Network Analysis{% endblock %}
{% block maincontent %}

<a href="{% url 'overview:dashboard' %}" class="back-link">‚Üê Back to Dashboard</a>

<div class="content-grid">
    <!-- Controls sidebar -->
    <div class="controls-section">
        <div style="font-weight: bold; color: #333; margin-bottom: 15px; font-size: 1.1em;">Select Options</div>
        <form method="get">
            <div class="form-group">
                <label for="province">Select a Province</label>
                <select class="form-control" name="province" id="province">
                    {% for province in provinces %}
                        <option value="{{ province }}" {% if province == selected_province %}selected{% endif %}>
                            {{ province }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="year">Select a Year</label>
                <select class="form-control" name="year" id="year">
                    {% for year in years %}
                        <option value="{{ year }}" {% if year == selected_year %}selected{% endif %}>
                            {{ year }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <button type="submit" class="btn" style="background-color: #007bff; color: white; border-color: #007bff;">Update Graph</button>
        </form>
    </div>
    
    <!-- Main content -->
    <div>
        <!-- Static Graph -->
        <div style="border: 1px solid #ddd; border-radius: 6px; overflow: hidden; margin-bottom: 30px;">
            <div style="background-color: #fafafa; padding: 15px; border-bottom: 1px solid #ddd; font-weight: bold; color: #333;">
                Static Network Graph
            </div>
            <div style="padding: 15px; text-align: center;">
                <img src="data:image/png;base64,{{ static_graph }}" alt="Political Network Graph" style="max-width: 100%; height: auto;"/>
            </div>
        </div>
        
        <!-- Interactive Graph -->
        <div style="border: 1px solid #ddd; border-radius: 6px; overflow: hidden;">
            <div style="background-color: #fafafa; padding: 15px; border-bottom: 1px solid #ddd; font-weight: bold; color: #333;">
                Interactive Network Graph
            </div>
            <div style="padding: 15px;">
                <div style="width:100%; height:600px; border: 1px solid #eee; border-radius: 4px;">
                    {{ interactive_html|safe }}
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}